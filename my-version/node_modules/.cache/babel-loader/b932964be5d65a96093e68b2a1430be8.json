{"ast":null,"code":"import { decompressSync, strFromU8 } from 'fflate';\nimport macro from 'vtk.js/Sources/macros';\nimport Base64 from 'vtk.js/Sources/Common/Core/Base64';\nimport Endian from 'vtk.js/Sources/Common/Core/Endian';\nimport { DataTypeByteSize } from 'vtk.js/Sources/Common/Core/DataArray/Constants';\nimport { registerType } from 'vtk.js/Sources/IO/Core/DataAccessHelper';\nconst {\n  vtkErrorMacro,\n  vtkDebugMacro\n} = macro;\nlet requestCount = 0;\n\nfunction getContent(url) {\n  const el = document.querySelector(`.webResource[data-url=\"${url}\"]`);\n  return el ? el.innerHTML : null;\n}\n\nfunction getElement(url) {\n  return document.querySelector(`.webResource[data-url=\"${url}\"]`);\n}\n\nfunction removeLeadingSlash(str) {\n  return str[0] === '/' ? str.substr(1) : str;\n}\n\nfunction fetchText(instance, url) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return new Promise((resolve, reject) => {\n    const txt = getContent(url);\n\n    if (txt === null) {\n      reject(new Error(`No such text ${url}`));\n    } else {\n      resolve(txt);\n    }\n  });\n}\n\nfunction fetchJSON(instance, url) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return new Promise((resolve, reject) => {\n    const txt = getContent(removeLeadingSlash(url));\n\n    if (txt === null) {\n      reject(new Error(`No such JSON ${url}`));\n    } else {\n      resolve(JSON.parse(txt));\n    }\n  });\n}\n\nfunction fetchArray(instance, baseURL, array) {\n  let options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};\n  return new Promise((resolve, reject) => {\n    const url = removeLeadingSlash([baseURL, array.ref.basepath, options.compression ? `${array.ref.id}.gz` : array.ref.id].join('/'));\n    const txt = getContent(url);\n\n    if (txt === null) {\n      reject(new Error(`No such array ${url}`));\n    } else {\n      if (array.dataType === 'string') {\n        let bText = atob(txt);\n\n        if (options.compression) {\n          bText = strFromU8(decompressSync(bText));\n        }\n\n        array.values = JSON.parse(bText);\n      } else {\n        const uint8array = new Uint8Array(Base64.toArrayBuffer(txt));\n        array.buffer = new ArrayBuffer(uint8array.length); // copy uint8array to buffer\n\n        const view = new Uint8Array(array.buffer);\n        view.set(uint8array);\n\n        if (options.compression) {\n          if (array.dataType === 'string' || array.dataType === 'JSON') {\n            array.buffer = strFromU8(decompressSync(new Uint8Array(array.buffer)));\n          } else {\n            array.buffer = decompressSync(new Uint8Array(array.buffer)).buffer;\n          }\n        }\n\n        if (array.ref.encode === 'JSON') {\n          array.values = JSON.parse(array.buffer);\n        } else {\n          if (Endian.ENDIANNESS !== array.ref.encode && Endian.ENDIANNESS) {\n            // Need to swap bytes\n            vtkDebugMacro(`Swap bytes of ${array.name}`);\n            Endian.swapBytes(array.buffer, DataTypeByteSize[array.dataType]);\n          }\n\n          array.values = macro.newTypedArray(array.dataType, array.buffer);\n        }\n\n        if (array.values.length !== array.size) {\n          vtkErrorMacro(`Error in FetchArray: ${array.name} does not have the proper array size. Got ${array.values.length}, instead of ${array.size}`);\n        }\n      } // Done with the ref and work\n\n\n      delete array.ref;\n\n      if (--requestCount === 0 && instance?.invokeBusy) {\n        instance.invokeBusy(false);\n      }\n\n      if (instance?.modified) {\n        instance.modified();\n      }\n\n      resolve(array);\n    }\n  });\n} // ----------------------------------------------------------------------------\n\n\nfunction fetchImage(instance, url) {\n  let options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return new Promise((resolve, reject) => {\n    const img = getElement(url);\n\n    if (img) {\n      resolve(img);\n    } else {\n      reject(new Error(`No such image ${url}`));\n    }\n  });\n} // ----------------------------------------------------------------------------\n\n\nconst HtmlDataAccessHelper = {\n  fetchJSON,\n  fetchText,\n  fetchArray,\n  fetchImage\n};\nregisterType('html', options => HtmlDataAccessHelper); // Export fetch methods\n\nexport default HtmlDataAccessHelper;","map":{"version":3,"names":["decompressSync","strFromU8","macro","Base64","Endian","DataTypeByteSize","registerType","vtkErrorMacro","vtkDebugMacro","requestCount","getContent","url","el","document","querySelector","innerHTML","getElement","removeLeadingSlash","str","substr","fetchText","instance","options","Promise","resolve","reject","txt","Error","fetchJSON","JSON","parse","fetchArray","baseURL","array","ref","basepath","compression","id","join","dataType","bText","atob","values","uint8array","Uint8Array","toArrayBuffer","buffer","ArrayBuffer","length","view","set","encode","ENDIANNESS","name","swapBytes","newTypedArray","size","invokeBusy","modified","fetchImage","img","HtmlDataAccessHelper"],"sources":["/Users/nicolerussack/CSCI401/CSCI401TissueSimulation/my-version/node_modules/vtk.js/Sources/IO/Core/DataAccessHelper/HtmlDataAccessHelper.js"],"sourcesContent":["import { decompressSync, strFromU8 } from 'fflate';\n\nimport macro from 'vtk.js/Sources/macros';\nimport Base64 from 'vtk.js/Sources/Common/Core/Base64';\nimport Endian from 'vtk.js/Sources/Common/Core/Endian';\nimport { DataTypeByteSize } from 'vtk.js/Sources/Common/Core/DataArray/Constants';\nimport { registerType } from 'vtk.js/Sources/IO/Core/DataAccessHelper';\n\nconst { vtkErrorMacro, vtkDebugMacro } = macro;\n\nlet requestCount = 0;\n\nfunction getContent(url) {\n  const el = document.querySelector(`.webResource[data-url=\"${url}\"]`);\n  return el ? el.innerHTML : null;\n}\n\nfunction getElement(url) {\n  return document.querySelector(`.webResource[data-url=\"${url}\"]`);\n}\n\nfunction removeLeadingSlash(str) {\n  return str[0] === '/' ? str.substr(1) : str;\n}\n\nfunction fetchText(instance, url, options = {}) {\n  return new Promise((resolve, reject) => {\n    const txt = getContent(url);\n    if (txt === null) {\n      reject(new Error(`No such text ${url}`));\n    } else {\n      resolve(txt);\n    }\n  });\n}\n\nfunction fetchJSON(instance, url, options = {}) {\n  return new Promise((resolve, reject) => {\n    const txt = getContent(removeLeadingSlash(url));\n    if (txt === null) {\n      reject(new Error(`No such JSON ${url}`));\n    } else {\n      resolve(JSON.parse(txt));\n    }\n  });\n}\n\nfunction fetchArray(instance, baseURL, array, options = {}) {\n  return new Promise((resolve, reject) => {\n    const url = removeLeadingSlash(\n      [\n        baseURL,\n        array.ref.basepath,\n        options.compression ? `${array.ref.id}.gz` : array.ref.id,\n      ].join('/')\n    );\n\n    const txt = getContent(url);\n    if (txt === null) {\n      reject(new Error(`No such array ${url}`));\n    } else {\n      if (array.dataType === 'string') {\n        let bText = atob(txt);\n        if (options.compression) {\n          bText = strFromU8(decompressSync(bText));\n        }\n        array.values = JSON.parse(bText);\n      } else {\n        const uint8array = new Uint8Array(Base64.toArrayBuffer(txt));\n\n        array.buffer = new ArrayBuffer(uint8array.length);\n\n        // copy uint8array to buffer\n        const view = new Uint8Array(array.buffer);\n        view.set(uint8array);\n\n        if (options.compression) {\n          if (array.dataType === 'string' || array.dataType === 'JSON') {\n            array.buffer = strFromU8(\n              decompressSync(new Uint8Array(array.buffer))\n            );\n          } else {\n            array.buffer = decompressSync(new Uint8Array(array.buffer)).buffer;\n          }\n        }\n\n        if (array.ref.encode === 'JSON') {\n          array.values = JSON.parse(array.buffer);\n        } else {\n          if (Endian.ENDIANNESS !== array.ref.encode && Endian.ENDIANNESS) {\n            // Need to swap bytes\n            vtkDebugMacro(`Swap bytes of ${array.name}`);\n            Endian.swapBytes(array.buffer, DataTypeByteSize[array.dataType]);\n          }\n\n          array.values = macro.newTypedArray(array.dataType, array.buffer);\n        }\n\n        if (array.values.length !== array.size) {\n          vtkErrorMacro(\n            `Error in FetchArray: ${array.name} does not have the proper array size. Got ${array.values.length}, instead of ${array.size}`\n          );\n        }\n      }\n\n      // Done with the ref and work\n      delete array.ref;\n      if (--requestCount === 0 && instance?.invokeBusy) {\n        instance.invokeBusy(false);\n      }\n      if (instance?.modified) {\n        instance.modified();\n      }\n\n      resolve(array);\n    }\n  });\n}\n\n// ----------------------------------------------------------------------------\n\nfunction fetchImage(instance, url, options = {}) {\n  return new Promise((resolve, reject) => {\n    const img = getElement(url);\n    if (img) {\n      resolve(img);\n    } else {\n      reject(new Error(`No such image ${url}`));\n    }\n  });\n}\n\n// ----------------------------------------------------------------------------\n\nconst HtmlDataAccessHelper = {\n  fetchJSON,\n  fetchText,\n  fetchArray,\n  fetchImage,\n};\n\nregisterType('html', (options) => HtmlDataAccessHelper);\n\n// Export fetch methods\nexport default HtmlDataAccessHelper;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}